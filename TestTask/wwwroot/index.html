<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Календарь на Bootstrap</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- FullCalendar CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <!-- FullCalendar JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
</head>
<body>
    <div class="container d-flex justify-content-center align-items-center vh-100">
        <div id="calendar" class="w-75"></div>
    </div>

    <!-- Модальное окно -->
    <div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">Информация о дне</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id="modalDate"></p>
                    <ul id="eventList"></ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                dayClick: function(date, jsEvent, view) {
                    $('#modalDate').text('Вы выбрали дату: ' + date.format('YYYY-MM-DD'));
                    // Сброс списка событий
                    $('#eventList').empty();

                    // Отправка запроса на сервер для получения событий на выбранную дату
                    $.ajax({
                        url: 'https://ваш_сервер/api/events', // URL вашего REST API
                        method: 'GET',
                        data: { date: date.format('YYYY-MM-DD') },
                        success: function(events) {
                            if (events.length > 0) {
                                events.forEach(function(event) {
                                    $('#eventList').append('<li>' + event.name + '</li>');
                                });
                            } else {
                                $('#eventList').append('<li>Событий нет</li>');
                            }
                        },
                        error: function() {
                            $('#eventList').append('<li>Ошибка при загрузке событий</li>');
                        }
                    });

                    $('#infoModal').modal('show');
                },
                events: function(start, end, timezone, callback) {
                    $.ajax({
                        url: 'https://ваш_сервер/api/events', // URL вашего REST API
                        method: 'GET',
                        dataType: 'json',
                        data: {
                            start: start.format(),
                            end: end.format()
                        },
                        success: function(data) {
                            var events = [];
                            $(data).each(function() {
                                events.push({
                                    title: this.name,
                                    start: this.date,
                                    color: this.color
                                });
                            });
                            callback(events);
                        },
                        error: function() {
                            alert('Ошибка при загрузке событий');
                        }
                    });
                },
                viewRender: function(view, element) {
                    $('#calendar').fullCalendar('removeEvents');
                    $('#calendar').fullCalendar('refetchEvents');
                }
            });
        });
    </script>
</body>
</html>